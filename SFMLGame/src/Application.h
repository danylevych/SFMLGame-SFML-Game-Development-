#pragma once

#include "Enums/StateID.h"
#include "GameStates/StateStack/StateStack.h"
#include "Inputs/Player/Player.h"

#include <SFML/System/Time.hpp>
#include <SFML/System/Clock.hpp>
#include <SFML/Graphics/RenderWindow.hpp>


////////////////////////////////////////////////////
// \brief
//		Represents the instance with all logic
//		of our game.
// 
////////////////////////////////////////////////////
class Application
{
private:
	sf::RenderWindow window;
	TextureHolder textures;
	FontHolder fonts;
	Player player;

	StateStack stateStack;
	
	const sf::Time TIME_PER_FRAME = sf::seconds(1.f / 60.f);

public:
	////////////////////////////////////////////////////////////////////
	// \brief
	//				Create an instance of application.
	// 
	////////////////////////////////////////////////////////////////////
	Application();

public:
	////////////////////////////////////////////////////////////////////
	// \brief
	//		This method starts an app, it is better to say
	//		run a game loop.
	// 
	////////////////////////////////////////////////////////////////////
	void Run();

private:
	////////////////////////////////////////////////////////////////////
	// \brief
	//			Initializes the state stack of the app.
	// 
	////////////////////////////////////////////////////////////////////
	void InitStates();

	////////////////////////////////////////////////////////////////////
	// \brief
	//		Initializes the resources of the game, other words
	//		load the all needed resourcer for runing the app.
	// 
	////////////////////////////////////////////////////////////////////
	void InitResources();

private:
	////////////////////////////////////////////////////////////////////
	// \brief
	//			This method handels the user input.
	// 
	////////////////////////////////////////////////////////////////////
	void ProcessInput();

	////////////////////////////////////////////////////////////////////
	// \brief
	//		This one updates the state for the player shape or 
	//		another shapes that will be shown on the screen.
	//		delta is the parameter that defines the time of each
	//		frame in our computer.
	// 
	////////////////////////////////////////////////////////////////////
	void Update(sf::Time deltaTime);

	////////////////////////////////////////////////////////////////////
	// \brief
	//		This method displaes all objects in user screen. 
	// 
	////////////////////////////////////////////////////////////////////
	void Render();
};

